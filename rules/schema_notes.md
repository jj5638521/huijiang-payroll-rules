三、AttendancePipe（读取/表头兼容）
- 输入源限定：仅接受“施工表”。
- 读取要求：按 schema 做字段完整性、类型与格式校验。
- 表头兼容：允许做受控映射，但必须可审计、可回溯。
- 阻断条件：缺字段、格式异常、项目不匹配、状态无效时立即阻断。
- 阻断输出：返回缺失项清单与修复建议，不进入后续计算。

四、Project识别
- 项目识别必须与施工表、支付记录表双向一致。
- 出现项目不匹配时，直接阻断并输出差异清单。
- 不允许静默归并或猜测修正；如发生自动更正，必须记录审计日志（前后值、触发规则、证据字段）。
- 同日冲突按“施工优先”规则处理，且需保留留痕。

五、PaymentPipe（识别与归集）
- 输入源限定：仅接受“支付记录表”。
- 识别规则：按 schema 校验记录合法性，仅归集有效状态数据。
- 归集要求：日期单位去重，金额逐步公式输出，确保可复算。
- 输出结构：必须包含已付/预支明细区块、差异清单、校验报告(≥10项)与审计留痕。
- 审计字段：run_id、规则版本、输入hash、输出hash 必须完整输出。
